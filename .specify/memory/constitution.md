<!--
Sync Impact Report:
- Version change: N/A → 1.0.0 (initial version)
- Added sections: All principles (I-VI), Additional Constraints, Development Workflow, and Governance
- Modified principles: All placeholder principles replaced with specific project principles
- Templates requiring updates: ✅ No updates needed to existing templates
- Follow-up TODOs: None
-->

# Hackathon II – Phase II Constitution

## Core Principles

### I. No Manual Coding
<!-- Zero Manual Code Rule -->
All code must be generated by Qwen CLI. No source code may be written, edited, or patched manually. If the output is incorrect, fix the spec and regenerate — never touch the code. Violation of this rule invalidates the phase.

### II. Spec-Driven Development Authority
<!-- Specs Are the Single Source of Truth -->
Behavior, structure, APIs, and UI must originate from specs. Code, comments, or assumptions cannot override specs. If something is not specified, it does not exist. All specifications must follow the SpecifyPlus Kit structure with mandatory categories.

### III. SpecifyPlus Kit Rules
<!-- Spec Lifecycle and Invocation Discipline -->
Specs must be written before implementation and must be versioned and traceable. All generation prompts must follow the structure: "Implement @specs/<path>.md", "Follow Constitution.md strictly", "Use SpecifyPlus conventions", "Generate code only".

### IV. AI Governance (Qwen CLI)
<!-- Qwen CLI Authority and Regeneration Rule -->
Qwen CLI is the only entity allowed to generate code. Any architectural or behavioral change requires spec update followed by full regeneration. Incremental manual fixes are forbidden.

### V. System Architecture Laws
<!-- Separation of Concerns and Stateless Backend -->
The system follows a clear separation of concerns: Frontend (Next.js) handles UI/routing/session, Backend (FastAPI) handles business logic/validation/auth, Database (Neon) handles persistent storage, and Auth (Better Auth) handles identity/JWT. The backend must remain stateless with all state stored in the database.

### VI. Authentication & Security Constitution
<!-- JWT Mandatory Rule and User Isolation Law -->
Every API request must include a valid JWT issued by Better Auth. FastAPI must verify JWT using shared secret. Users can access only their own tasks, with all DB queries filtered by authenticated user ID. Security violations result in automatic failure.

## Additional Constraints

### Technology Stack Requirements
This Constitution applies only to Phase II and governs: Frontend: Next.js (App Router), Backend: Python FastAPI, ORM: SQLModel, Database: Neon Serverless PostgreSQL, Authentication: Better Auth (JWT-based), AI Tooling: Qwen CLI, Spec System: SpecifyPlus Kit.

### API Contract Law
Fixed REST endpoints must be followed exactly:
- GET /api/{user_id}/tasks
- POST /api/{user_id}/tasks
- GET /api/{user_id}/tasks/{id}
- PUT /api/{user_id}/tasks/{id}
- DELETE /api/{user_id}/tasks/{id}
- PATCH /api/{user_id}/tasks/{id}/complete

## Development Workflow

### Frontend Architecture Rules
Next.js App Router is mandatory with Server Components by default and Client Components only when necessary. Frontend must never access database directly; all data access occurs via FastAPI.

### Database & Persistence Law
In-memory storage is forbidden. Neon PostgreSQL must be used with SQLModel defining all schemas. Each task must include user_id with ownership enforcement mandatory at query level.

### Error Handling Law
Standardized responses must be used:
- 401: Unauthorized (missing/invalid JWT)
- 403: Forbidden (user isolation violation)
- 404: Resource not found
- 422: Validation error

Errors must be spec-defined and deterministic.

## Governance

The Constitution is the supreme law. In case of conflict between generated code, README, individual spec, and Constitution.md, the Constitution is final and absolute. Phase II must remain compatible with Phase III (AI Chatbot), MCP tools, and Agent-based architecture. Shortcuts that block later phases are prohibited.

**Version**: 1.0.0 | **Ratified**: 2026-01-04 | **Last Amended**: 2026-01-04